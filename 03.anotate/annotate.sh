#softmask
RepeatMasker -e ncbi -pa 36 -species "sorghum bicolor" -dir ./ -xsmall -gff j2055A.polished.fasta

#annotate
find /public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile -type f -name "*.bam" | paste -sd, - > bamfile.txt
singularity exec /public/home/weichuanzheng/software/singularity/braker3/braker3.sif braker.pl --JAVA_PATH=/public/home/weichuanzheng/software/jdk/bin --threads=20 --species=j2055 \
   --genome=/public/home/weichuanzheng/project/15.J2055A/12.annotation/j2055A.polished.fasta.masked \
   --prot_seq=/public/home/weichuanzheng/project/11.Sorghum_genome/06.prot/structure_annotation1.fasta \
   --bam=/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR17344411.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR17344433.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912171.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912172.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912173.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912178.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912179.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912184.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912185.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912186.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912187.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912190.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR23260554.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749278.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749279.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749284.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749285.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749286.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR17344428.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912174.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912175.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912176.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912177.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912180.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912181.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912182.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912183.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912188.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR20912189.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR23260553.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR23260942.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR23260943.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749275.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749276.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749277.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749280.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749281.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749282.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR25749283.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR21696831.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR21696832.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR21696833.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087204.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087205.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087206.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087207.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087211.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087212.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087213.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR21696834.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR21696835.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR21696836.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087208.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087209.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087210.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087269.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087270.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087271.bam,/public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/SRR26087272.bam
date
stringtie --merge -o stringtie.gtf /public/home/weichuanzheng/project/15.J2055A/12.annotation/bamfile/gtf/*.gtf
echo 'stringtie.gtf is completed'
date
python /public/home/weichuanzheng/software/singularity/braker3/stringtie2utr.py -g ./braker/braker.gtf -s stringtie.gtf -o braker_with_utrs.gtf
